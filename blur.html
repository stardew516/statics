<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <!-- <meta name="viewport" content="width=750"/> -->
    <!--å…è®¸å…¨å±-->
    <meta content="yes" name="apple-mobile-web-app-capable" />
    <meta content="yes" name="apple-touch-fullscreen" />
    <meta name="data-spm" content="a215s" />
    <meta content="telephone=no,email=no" name="format-detection" />
    <meta content="fullscreen=yes,preventMove=no" name="ML-Config" />
    <meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0"/>
    <!--å…è®¸å…¨å±-->
    <title>æ¯›ç»ç’ƒæ•ˆæœ</title>
    <script src="https://cdn.jsdelivr.net/npm/vue"></script>
    <style type="text/css">
      *{
        margin:0;
        padding:0;
        -webkit-tap-highlight-color: rgba(255, 255, 255, 0);
      }
      body,html{
        width: 100%;
        height: 100%;
        position: relative;
      }
			input, textarea {
				border: 1px solid #eee;
				padding: 5px;
				outline: none;
				flex: 1;
			}
			input:focus, textarea:focus {
				border: 1px solid #69c1fc;
			}
      .font-pf {
        font-family: PingFangSC-Regular;
      }
			.font-pfl {
				font-family: PingFangSC-Light;
			}
			.font-pfm {
				font-family: PingFangSC-Medium;
			}
			.header {
				width: 100%;
				position: relative;
			}
			.top {
				position: absolute;
				top: 10%;
				width: 100%;
				left: 0;
				z-index: 9;
			}
			.title {
				font-size: 32px;
				color: #fff;
				line-height: 32px;
				padding: 20px 0 6px 0;
				margin: 0 auto;
				text-align: center;
			}
			.subtitle {
				opacity: 0.8;
				font-size: 16px;
				color: #FFF8F2;
				letter-spacing: 0;
				line-height: 16px;
				text-align: center;
			}
			.desc-box {
				position: absolute;
				top: 0;
				left: 0;
				width: 100%;
				height: 100%;
				background-image: url(http://img3.imgtn.bdimg.com/it/u=3160668355,411061178&fm=26&gp=0.jpg);
    		clip-path: polygon(6% 60.4%, 94% 60.4%, 94% 94%, 6% 94%);
				filter: blur(12px);
				background-size: 100%;
				transition: all .2s ease;
				z-index: 2;
			}
			.desc {
				position: absolute;
				bottom: 6%;
				left: 6%;
				width: 88%;
				box-sizing: border-box;
				box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.10);
				z-index: 3;
				overflow: hidden;
			}
			.desc-content {
				font-family: PingFangSC-Regular;
				font-size: 12px;
				color: #FFF8F2;
				letter-spacing: 0;
				line-height: 16px;
				padding: 18px 20px 18px 40px;
			}
			.desc-content:before {
				position: absolute;
				font-size: 20px;
				width: 20px;
				height: 20px;
				top: 20px;
				left: 10px;
				content: attr(tag);
				color: #fff;
			}
			.desc-inner {
				word-break: break-word;
				white-space: pre-wrap;
			}
			.modify-box {
				padding: 20px;
				font-size: 12px;
			}
			.modify-title {
				padding: 10px 0;
			}
			.modify {
				margin-bottom: 10px;
				display: flex;
			}
			.modify:before {
				content: attr(tag);
				font-size: 12px;
				width: 80px;
				display: inline-block;
				text-align: right;
				padding-right: 5px;
			}
    </style>
  </head>
  <body>
    <div id="app" class="app font-pf">
			<div class="header">
				<img ref="img" :src="img" width="100%" height="auto"/>
				<div class="top">
					<div class="font-pfm title">{{title}}</div>
					<div class="font-pfl subtitle">{{subtitle}}</div>
				</div>
				<div  v-if="desc" class="desc-box" :style="{'background-image': 'url('+img+')', 'clip-path': clipPath, '-webkit-clip-path': clipPath}"></div>
				<div class="desc" v-if="desc" :style="{'bottom': bottom+'%', 'left': left+'%', 'width': (100-2*left)+'%', }">
					<div ref="desccnt" class="desc-content" :tag="descTag">
						<div class="desc-inner">{{desc}}</div>
					</div>
				</div>
			</div>
			<div class="modify-box">
				<p class="modify-title">ä¿®æ”¹å†…å®¹æŸ¥çœ‹æ•ˆæœ</p>
				<div class="modify" tag="æ ‡é¢˜ï¼š"><input type="text" v-model="title" placeholder="è¯·è¾“å…¥æ ‡é¢˜" maxlength="10"/></div>
				<div class="modify" tag="å‰¯æ ‡é¢˜ï¼š"><input type="text" v-model="subtitle" placeholder="è¯·è¾“å…¥å‰¯æ ‡é¢˜" maxlength="18"/></div>
				<div class="modify" tag="æè¿°ï¼š"><textarea v-model="desc" placeholder="è¯·è¾“å…¥æè¿°" maxlength="100">{{desc}}</textarea></div>
				<div class="modify" tag="æè¿°æ ‡ç­¾ï¼š"><input type="text" v-model="descTag" placeholder="è¯·è¾“å…¥æè¿°æ ‡ç­¾" maxlength="1"/></div>
				<div class="modify" tag="å·¦ä¾§è·ç¦»(%)ï¼š"><input type="number" v-model="left" placeholder="è¯·è¾“å…¥æè¿°æ ‡ç­¾è·ç¦»å·¦ä¾§è·ç¦»" maxlength="3"/></div>
				<div class="modify" tag="åº•éƒ¨è·ç¦»(%)ï¼š"><input type="number" v-model="bottom" placeholder="è¯·è¾“å…¥æè¿°æ ‡ç­¾è·ç¦»å·¦ä¾§è·ç¦»" maxlength="3"/></div>
				<dl>
					<dt>PSï¼š</dt>
					<dd>1ã€ä½¿ç”¨è£å‰ªæŠ€æœ¯å®ç°ï¼Œå…¼å®¹å„å¤§æµè§ˆå™¨ä»¥åŠä½ç‰ˆæœ¬androidå’Œiosã€‚</dd>
					<dd>2ã€æ»šåŠ¨åº•å›¾æ¯›ç»ç’ƒæ•ˆæœä¸å˜ã€‚</dd>
					<dd>3ã€åŠ¨æ€åŠ è½½å„æ•°æ®æ—¶æ¯›ç»ç’ƒæ•ˆæœè·Ÿéšå˜åŒ–ã€‚</dd>
				</dl>
			</div>
  	</div>
  </body>
  <script type="text/javascript">
    var app = new Vue({
      el: '#app',
      data: {
				title: 'æ¯›ç»ç’ƒ', // æ ‡é¢˜
				subtitle: 'åŠ¨æ€å›¾ç‰‡æ¯›ç»ç’ƒæ•ˆæœ', // å‰¯æ ‡é¢˜
				img: 'http://img3.imgtn.bdimg.com/it/u=3160668355,411061178&fm=26&gp=0.jpg', // å¤´å›¾
				desc: 'ä½¿ç”¨è£å‰ªæŠ€æœ¯å®ç°ï¼Œå…¼å®¹å„å¤§æµè§ˆå™¨ä»¥åŠä½ç‰ˆæœ¬androidå’Œiosï¼Œæ»šåŠ¨åº•å›¾æ¯›ç»ç’ƒæ•ˆæœä¸å˜ï¼ŒåŠ¨æ€åŠ è½½å„æ•°æ®æ—¶æ¯›ç»ç’ƒæ•ˆæœè·Ÿéšå˜åŒ–ã€‚', // åº•éƒ¨æè¿°è‡ªé€‚åº”
				clipPath: '', // è£å‰ªè·¯å¾„
				descTag: 'ğŸ’—', // æè¿°æ ‡ç­¾
				rate: 1, // å›¾ç‰‡å®½é«˜æ¯”
				descH: 0, // æè¿°çš„é«˜åº¦
				left: 6, // æè¿°è·ç¦»å·¦ä¾§ ç™¾åˆ†æ¯”
				bottom: 6,  // æè¿°è·ç¦»åº•éƒ¨ ç™¾åˆ†æ¯”
				wW: document.body.clientWidth || 375	// å±å¹•å®½åº¦
			},
			watch: {
				// ç›‘æ§æè¿°é«˜åº¦è¿›è¡Œè£å‰ª
				desc: function (newVal) {
					console.log(newVal)
					this.getClipPath()
				},
				// ç›‘æ§ææ¡†å·¦ä¾§è¾¹è·è¿›è¡Œè£å‰ª
				left: function (newVal) {
					this.getClipPath()
				},
				// ç›‘æ§æè¿°æ¡†åº•éƒ¨è¾¹è·è¿›è¡Œè£å‰ª
				bottom: function (newVal) {
					this.getClipPath()
				},
			},
      methods: {
				// è¿›è¡Œè£å‰ª
				getClipPath: function () {
					const left = this.left || 0
					const bottom = this.bottom || 0
					const clipEl = this.$refs.desccnt
					const clipElH = this.wW * this.rate
					const clipHeight = clipEl ? clipEl.clientHeight : 0
					const clipH = ((clipElH - clipHeight) / clipElH - bottom / 100) * 100
					this.clipPath = `polygon(${left}% ${clipH}%, ${100 - left}% ${clipH}%, ${100 - left}% ${100 - bottom}%, ${left}% ${100 - bottom}%)`
				}
      },
      mounted () {
				const $t = this
				const img = this.$refs.img
				img.onload = function () {
					$t.rate = img.height / img.width
					$t.getClipPath()
				}
      }
    })
  </script>

</html>
